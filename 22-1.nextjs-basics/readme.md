# Introduction to Next.js

## What is Next.js and Why do we need it?

지금까지는 리액트와 그에 딸린 부수적인 것들 (redux, react-router-dom, styled component etc.)을 배우고,
가볍에 배포하는 법까지 배웠습니다. 지금부터 배울 내용인 next.js는 이러한 리액트를 개발하는데 필요한 패키지들을,
사용하기 쉽게 묶어 놓은 'Framework'라고 이해하면 편합니다. 이런 특성 때문에, 이것을 풀스택 프레임워크라고도 부르기도 하죠.


## Key Feature of Next.js

Next.js의 가장 중요한 특징이자 강점은, 서버사이드 랜더링입니다. 이게 무슨 의미인지 천천히 풀어가보죠.
리액트는 기본적으로 클라이언트에서 랜더링을 진행합니다. 경우에따라서 정보가 없는 페이지를 랜더링하고, 필요할때 통신을 해서
데이터를 받아오는 경우도 있습니다. 하지만 이런 특징이 갖는 문제점은, 대표적으로 검색앤진이 이 페이지가 담고자 하는 정보를,
긁어오지 못한다는 겁니다. 정보가 필요할때만 불러와 지니까요. 다른 문제점은, 랜더링을 할때 정보가 필요할때 추가적인 통신이 필요하다는 겁니다.
결국, 리액트가 페이지를 띄우는데 초기 랜더링과, 통신을 한 후 랜더링을 두번해야 유저가 필요한 페이지가 뜨게 된다는 겁니다. 이건 절대 좋은 UX가 아닙니다.
이런 문제점을 해결한 방식이 서버사이드 랜더링입니다. 미리 서버에서 정보+랜더링을 하여 페이지를 보내주는 것이죠. React 자체가 이런 방식을 지원해주기는 합니다.
몇개의 함수로 이 기능을 지원하긴하는데, 조금 쓰기 어렵다고 합니다. 한번의 세팅을 더 거쳐야 하는 번거로움이 있는 것이죠.
이에반해, Next.js는 기본적으로 서버사이드 랜더링을 진행합니다. 이런 점에서 Next.js를 선호되어 왔습니다.
결과적으로, Next.js가 지원하는 Pre-rendering과 React의 클라 사이드 랜더링으로 유저는 최대의 UX를 받을 수 있는 것입니다.


또다른 강점으로는 라우팅을 간소화 해줍니다. React는 기본적으로 라우팅을 지원하지 않습니다.(React-Router-Dom이 따로 필요합니다.)
하지만 Next.js는 폴더와 파일별로 라우팅을 지원합니다. 이러한 형태는 더 readable한 코드를 만들어 줍니다. 물론 Nested Route, Redirection 등등 reactrouter가 지원하는 기능도 다 지원합니다.

마지막으로, Next.js는 백앤드 기능도 제공합니다. DB에 접근하는 방법과, server side authentication을 지원합니다. 이게 우리가 백앤드를 몰라도 충분히 앱을 만들 수 있게 합니다.


### 333. Installing Next.js
간단합니다. npx create-next-app

### 334. Structure of Next.js

nextjs를 설치했다면, 세개의 폴더가 보일겁니다. 우선 page안에는 우리가 주로 개발을 진행 할 곳입니다. 
style은 넘어가기로 하고, public은 주로 빌드된 내용이 담기는 폴더입니다. 이 폴더 안에서 프리 랜더링이 진행이 되고, 어떤 js청크가 필요한지 판단합니다.

### 335. Writing the first page 

넥스트는 page폴더안에 만드는 자바스크립트 파일마다 라우팅을 지원합니다. 예를 들어 news.js를 만들었다면, .../news로 접근하기만 하면 된다는 것이죠.
그리고 당연하게도 index.js페이지도 지원합니다.(기본 url이 향하는 페이지) 페이지는 평소 리액트 만들듯이 function based components를 만들어 주시면 되고, 마지막에 export default NAME
해주고, npm run dev로 실행시키면 index파일을 불러와 줄겁니다. 추가로 /news로 이동해서 어떻게 라우팅이 작동하는지 보아도 좋겠습니다.

### 336. Nested Path
이제 중첩 경로를 만드는 법입니다. 예를 들어 . /news/detail 같이 path를 파고들어가는 형태 말이죠. 방법은 간단합니다. page안에 다른 폴더를 만들어 주기만 하면 된는 겁니다. 그러면 넥스트가 알아서 라우팅을 진행해요.
그 안에 index.js와 라우팅이 될 이름의 파일을 만들어주면 nested path를 만들어 주게 되는 겁니다.

### 337. Dynamic Page
만약 우리가 news 안에 뉴스 리스트가 있고, 뉴스 디테일을 url에 id로 구분해 띄우고 싶다면 어떻게 작성해야 할까요?
그럴 경우 넥스트에서는 []안에 param을 담은 모습으로 파일을 만들어주면 됩니다.

### 338. Extracting Params from Url
그럼 특정 아이디를 url로 받았을때 어떻게 뽑아내야 할까요? useRouter를 사용하면 쉽게 추출할 수 있습니다.
useRouter().query. 그 다음 이름 [] 안에 있는 키를 붙이면 아이디를 쉽게 가져올 수 있습니다.

### 339. Href or Link
당연히 Next.js도 다른 페이지로 넘어 갈 수 있는 기능이 있습니다. react-router와 마찬가지로 Link 컴포넌트를 사용하면 되는데요, href props를 사용해야 합니다.
html 기본태그인 a 태그를 사용하면, react-router에서 봤듯, 새로운 페이지를 요청하기 때문에, Link를 사용할 것을 추천합니다.


